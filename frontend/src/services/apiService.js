import { apiClient } from './authService';\n\nclass ApiService {\n  /**\n   * Health check\n   */\n  async getHealth() {\n    try {\n      const response = await apiClient.get('/health');\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Get API info\n   */\n  async getInfo() {\n    try {\n      const response = await apiClient.get('/info');\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Get deals with pagination and filters\n   */\n  async getDeals(params = {}) {\n    try {\n      const response = await apiClient.get('/deals', { params });\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Create new deal\n   */\n  async createDeal(dealData) {\n    try {\n      const response = await apiClient.post('/deals', dealData);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Get analytics data\n   */\n  async getAnalytics(params = {}) {\n    try {\n      const response = await apiClient.get('/analytics', { params });\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Post to Twitter\n   */\n  async postToTwitter(postData) {\n    try {\n      const response = await apiClient.post('/twitter/post', postData);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Search Amazon products\n   */\n  async searchAmazonProducts(params = {}) {\n    try {\n      const response = await apiClient.get('/amazon/products', { params });\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Shorten URL\n   */\n  async shortenUrl(urlData) {\n    try {\n      const response = await apiClient.post('/links/shorten', urlData);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Get all users (admin only)\n   */\n  async getUsers(params = {}) {\n    try {\n      const response = await apiClient.get('/users', { params });\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Get user by ID\n   */\n  async getUserById(userId) {\n    try {\n      const response = await apiClient.get(`/users/${userId}`);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Update user (admin only)\n   */\n  async updateUser(userId, userData) {\n    try {\n      const response = await apiClient.put(`/users/${userId}`, userData);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Delete user (admin only)\n   */\n  async deleteUser(userId) {\n    try {\n      const response = await apiClient.delete(`/users/${userId}`);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Get user usage statistics\n   */\n  async getUserUsage(userId) {\n    try {\n      const response = await apiClient.get(`/users/${userId}/usage`);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Reset user usage (admin only)\n   */\n  async resetUserUsage(userId, resetData) {\n    try {\n      const response = await apiClient.post(`/users/${userId}/reset-usage`, resetData);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Get plan information\n   */\n  async getPlanInfo() {\n    try {\n      const response = await apiClient.get('/users/plans/info');\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Upgrade user plan\n   */\n  async upgradePlan(userId, planData) {\n    try {\n      const response = await apiClient.post(`/users/${userId}/upgrade`, planData);\n      return response.data;\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  /**\n   * Handle API errors consistently\n   */\n  handleError(error) {\n    if (error.response) {\n      const { data, status } = error.response;\n      \n      // Handle specific error types\n      switch (data.code) {\n        case 'RATE_LIMIT_EXCEEDED':\n        case 'PLAN_RATE_LIMIT_EXCEEDED':\n        case 'FEATURE_LIMIT_EXCEEDED':\n          return {\n            ...data,\n            isLimitError: true\n          };\n        case 'PREMIUM_REQUIRED':\n          return {\n            ...data,\n            isPremiumRequired: true\n          };\n        case 'INSUFFICIENT_PLAN':\n          return {\n            ...data,\n            isPlanUpgradeRequired: true\n          };\n        default:\n          return {\n            message: data.message || 'An error occurred',\n            details: data.details || [],\n            code: data.code,\n            status\n          };\n      }\n    } else if (error.request) {\n      return {\n        message: 'Network error - please check your connection',\n        code: 'NETWORK_ERROR'\n      };\n    } else {\n      return {\n        message: error.message || 'An unexpected error occurred',\n        code: 'UNKNOWN_ERROR'\n      };\n    }\n  }\n}\n\n// Create and export singleton instance\nconst apiService = new ApiService();\nexport default apiService;